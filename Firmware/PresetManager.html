<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="assets/styles/main.css">
		<script src="assets/scripts/preset_manager.js"></script>
	</head>
	<body>
		<div>
			<div class="panel">
				<div class="hf row">
					<div class="screw">+</div>
					<div>PRESET &nbsp; MANAGER</div>
					<div class="screw">+</div>
				</div>

				<div class="r row">
					<div class="col">
						<button id="store" type="button" class="b blue" tabindex="1"></button>
						<div class="label">store</div>
					</div>
					<div class="d row">
						<div class="dx col">
							<input id="current_preset" class="dc lcd w2" disabled>
							<input class="dc lcd w2" disabled>
						</div>
						<div class="dx col">
							<input id="current_name" class="dc" maxlength="20" tabindex="2">
							<input id="recall_name" class="dc lcd" disabled>
						</div>
						<div class="dx col">
							<input class="dc lcd w4" disabled>
							<input id="recall_preset" class="dc w4" type="number" min="1" max="30" tabindex="3">
						</div>
					</div>
					<div class="col">
						<button id="recall" type="button" class="b blue" tabindex="4"></button>
						<div class="label">recall</div>
					</div>
				</div>
				<div class="r row">
					<div class="row w200">
						<div class="col">
							<button id="last" type="button" class="b" tabindex="5"></button>
							<div class="label">last</div>
						</div>
						<div class="col">
							<button id="next" type="button" class="b" tabindex="6"></button>
							<div class="label">next</div>
						</div>
					</div>
					<div class="col flexs w3">
						<div class="row flexs">
							<input type="radio" id="v3" name="version" value="v3" tabindex="7" hidden>
							<label for="v3" hidden>primo</label>
						</div>
						<div class="row flexs">
							<input type="radio" id="v2" name="version" value="v2" tabindex="8" hidden>
							<label for="v2" hidden>v2    </label>
						</div>
					</div>
					<div class="col w3">
						<button id="remote" type="button" class="b" tabindex="9"></button>
						<div class="label">remote</div>
					</div>
				</div>
				<div class="hf row">
					<div class="hole"></div>
					<div>STUDIO H SOFTWARE</div>
					<div class="hole"></div>
				</div>
			</div>
		</div>
	</body>
	<script>
		var baseAddr = 0x02BD80;
		var rem = true;
		var req;
		var c_pset = document.getElementById("current_preset");
		var r_pset = document.getElementById("recall_preset");
		var c_name = document.getElementById("current_name");
		var r_name = document.getElementById("recall_name");
		var names = [];
		r_pset.onchange = rOnChange;
		c_name.onchange = cnameOnChange;
		document.getElementById("sB").onclick = sBOnClick;
		document.getElementById("rB").onclick = rBOnClick;
		document.getElementById("lB").onclick = lBOnClick;
		document.getElementById("nB").onclick = nBOnClick;
		document.getElementById("remB").onclick = remBOnClick;
		document.getElementById("v3").checked = true;

		send("readmemory?addr=" + baseAddr.toString(16) + "&length=6");
		var data = JSON.parse(req.responseText)[0].data;
		if (data != "425543484c41") {
			for (var i=1; i<31; i++){
				writeName(i,"");
				names[i]="";
			}
			send("writememory?addr=" + baseAddr.toString(16) + "&data=425543484C41");
			writePreset(1);
		} else {
			for (var i=1; i<31; i++){
				names[i]=readName(i);
			}
		}

		c_pset.value = readPreset();
		cOnChange();
		r_pset.value = c_pset.value;
		rOnChange();
	</script>
</html>
